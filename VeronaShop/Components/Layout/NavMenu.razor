
@using Microsoft.AspNetCore.Identity
@inject NavigationManager Navigation
@inject Microsoft.Extensions.Localization.IStringLocalizer<SharedResources> L

<MudNavMenu>
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">@L["HomeTitle"]</MudNavLink>
    <MudNavLink Href="shop" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.ShoppingBag">@L["Shop"]</MudNavLink>
    <MudNavLink Href="cart" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.ShoppingCart">@L["Cart"]</MudNavLink>
    <MudNavLink Href="checkout" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Payment">@L["Checkout"]</MudNavLink>

    <AuthorizeView Roles="Admin">
        <Authorized>
            <MudNavGroup Title="@L["AdminMenu"]" Icon="@Icons.Material.Filled.AdminPanelSettings">
                <MudNavLink Href="admin" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Dashboard">@L["Overview"]</MudNavLink>
                <MudNavLink Href="admin/products" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Inventory">@L["ProductsMenu"]</MudNavLink>
                <MudNavLink Href="admin/orders" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Receipt">@L["OrdersMenu"]</MudNavLink>
                <MudNavLink Href="admin/carriers" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.LocalShipping">@L["CarriersMenu"]</MudNavLink>
                <MudNavLink Href="admin/deliveries" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.DeliveryDining">@L["DeliveriesMenu"]</MudNavLink>
                <MudNavLink Href="admin/users" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Group">@L["UsersMenu"]</MudNavLink>
            </MudNavGroup>
        </Authorized>
    </AuthorizeView>

    <MudNavGroup Title="@L["AccountMenu"]" Icon="@Icons.Material.Filled.AccountCircle">
        <AuthorizeView>
            <NotAuthorized>
                <MudNavLink Href="/account/login" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Login">@L["Login"]</MudNavLink>
                <MudNavLink Href="/account/register" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AppRegistration">@L["Register"]</MudNavLink>
            </NotAuthorized>
            <Authorized>
                <MudNavLink Href="/account/orders" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.List">@L["MyOrdersTitle"]</MudNavLink>
                <MudNavLink Href="/account/notifications" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Notifications">@L["Notifications"]</MudNavLink>
                <MudNavLink Href="/account/profile" Icon="@Icons.Material.Filled.Person">@L["Profile"]</MudNavLink>
                <MudButton Variant="Variant.Text" Color="Color.Error" StartIcon="@Icons.Material.Filled.Logout" OnClick="@LogoutAsync">@L["SignOut"]</MudButton>
            </Authorized>
        </AuthorizeView>
    </MudNavGroup>

    
</MudNavMenu>

@code {
    private Task LogoutAsync()
    {
        // perform a full browser navigation to the logout endpoint so the server can clear cookies
        Navigation.NavigateTo("/auth/logout", true);
        return Task.CompletedTask;
    }
}


