
@using Microsoft.AspNetCore.Identity
@inject NavigationManager Navigation

<MudNavMenu>
    <MudNavLink Href="" Match="NavLinkMatch.All" Icon="@Icons.Material.Filled.Home">Home</MudNavLink>
    <MudNavLink Href="shop" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.ShoppingBag">Shop</MudNavLink>
    <MudNavLink Href="cart" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.ShoppingCart">Cart</MudNavLink>
    <MudNavLink Href="checkout" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Payment">Checkout</MudNavLink>

    <AuthorizeView Roles="Admin">
        <Authorized>
            <MudNavGroup Title="Admin" Icon="@Icons.Material.Filled.AdminPanelSettings">
                <MudNavLink Href="admin" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Dashboard">Overview</MudNavLink>
                <MudNavLink Href="admin/products" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Inventory">Products</MudNavLink>
                <MudNavLink Href="admin/orders" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Receipt">Orders</MudNavLink>
                <MudNavLink Href="admin/users" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Group">Users</MudNavLink>
            </MudNavGroup>
        </Authorized>
    </AuthorizeView>

    <MudNavGroup Title="Account" Icon="@Icons.Material.Filled.AccountCircle">
        <AuthorizeView>
            <NotAuthorized>
                <MudNavLink Href="/account/login" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.Login">Login</MudNavLink>
                <MudNavLink Href="/account/register" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.AppRegistration">Register</MudNavLink>
            </NotAuthorized>
            <Authorized>
                <MudNavLink Href="/account/orders" Match="NavLinkMatch.Prefix" Icon="@Icons.Material.Filled.List">My Orders</MudNavLink>
                <MudNavLink Href="/account/profile" Icon="@Icons.Material.Filled.Person">Profile</MudNavLink>
                <MudButton Variant="Variant.Text" Color="Color.Error" StartIcon="@Icons.Material.Filled.Logout" OnClick="@LogoutAsync">Logout</MudButton>
            </Authorized>
        </AuthorizeView>
    </MudNavGroup>

    
</MudNavMenu>

@code {
    private Task LogoutAsync()
    {
        // perform a full browser navigation to the logout endpoint so the server can clear cookies
        Navigation.NavigateTo("/auth/logout", true);
        return Task.CompletedTask;
    }
}


